<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>cps test - game</title>
    <link rel="stylesheet" href="/public/style/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>
<body>
<div class="app">
    <nav class="navbar">
        <div class="nav-container">
            <a class="logo"><img src="https://cpstest.io/img/logo-dark-bg.webp" height="44" width="185" alt="logo"></a>
            <div class="menu">
                <button>排行</button>
                <button>功能</button>
                <button>翻译</button>
            </div>
        </div>
    </nav>

    <main>
        <div class="container">
            <h1>CPS <span>Test</span></h1>

            <p>Take our CPS Test to accurately measure your clicks per second. Improve your clicking speed with our CPS Tester and challenge yourself to achieve higher scores yourself to achieve higher scores.</p>

            <div class="text-center">
                <div><i class="fas fa-clock"></i> Time: <span id="timerDisplay">10.00</span></div>
                <div><i class="fas fa-bolt"></i> Click/s: <span id="cpsDisplay"> 0.00</span></div>
                <div><i class="fas fa-trophy"></i> Click: <span id="clickCount"> 0</span></div>
            </div>

            <div class="container-click">
                <div class="clickarea" id="circle">
                    <!-- Combo显示 -->
                    <div class="combo-display" id="comboDisplay">
                        <div class="combo-text">COMBO</div>
                        <div class="combo-number" id="comboNumber">x0</div>
                    </div>
                </div>
            </div>

            <div class="seconds">
                <div><div><a href="#" data-seconds="10">10s</a></div></div>
                <div><a href="#" data-seconds="20">20s</a></div>
                <div><a href="#" data-seconds="30">30s</a></div>
                <div><a href="#" data-seconds="40">40s</a></div>
                <div><a href="#" data-seconds="50">50s</a></div>
            </div>

            <div class="footer-content">
                <section class="footer-section">
                    <h2><i class="fas fa-tachometer-alt" style="color: #4CAF50;"></i> What is CPS Test</h2>
                    <p>CPS Test (Clicks Per Second) is a free online tool that measures your mouse clicking speed. It calculates how many times you can click your mouse within a specific time frame, typically expressed as clicks per second. This test is popular among gamers, especially those playing Minecraft PvP, where fast clicking can provide a competitive advantage.</p>
                </section>

                <section class="footer-section">
                    <h2><i class="fas fa-chart-line" style="color: #2196F3;"></i> How to Improve Your CPS Score</h2>
                    <p>Regular practice with our CPS tester can help improve your clicking speed. Try different clicking techniques like butterfly clicking, jitter clicking, or drag clicking to find what works best for you. Most average users score between 3-6 CPS, while professional gamers can achieve 10-15+ CPS with advanced techniques.</p>
                </section>

                <section class="footer-section">
                    <h2><i class="fas fa-star" style="color: #FFC107;"></i> Why Use CPS Test</h2>
                    <ul>
                        <li><strong>Gaming Performance:</strong> Measure and improve your clicking speed for competitive gaming</li>
                        <li><strong>Practice Tool:</strong> Free online CPS tester to track your progress over time</li>
                        <li><strong>Multiple Time Modes:</strong> Choose from 10, 20, 30, 40, or 50 second tests</li>
                        <li><strong>Instant Results:</strong> Real-time CPS calculation and click tracking</li>
                    </ul>
                </section>

                <section class="footer-section">
                    <h2><i class="fas fa-cogs" style="color: #FF5722;"></i> CPS Test Features</h2>
                    <p>Our CPS tester offers accurate click speed measurement with an intuitive interface. Test your mouse clicking speed with customizable time durations. Perfect for gamers who want to improve their click speed or anyone curious about their clicking ability. Start testing now and see how fast you can click!</p>
                </section>

                <section class="footer-section">
                    <h2><i class="fas fa-gamepad" style="color: #9C27B0;"></i> About Click Speed Testing</h2>
                    <p>Click speed testing has become essential for gamers, particularly in Minecraft PvP, shooting games, and other competitive games where rapid clicking matters. Use our free CPS test to measure, practice, and improve your clicks per second. Whether you're a casual gamer or a competitive player, tracking your CPS can help you enhance your gaming performance.</p>
                </section>
            </div>
        </div>
    </main>

    <footer>
<!--                    <div class="footer-content">-->
<!--                        <section class="footer-section">-->
<!--                            <h2><i class="fas fa-tachometer-alt" style="color: #4CAF50;"></i> What is CPS Test</h2>-->
<!--                            <p>CPS Test (Clicks Per Second) is a free online tool that measures your mouse clicking speed. It calculates how many times you can click your mouse within a specific time frame, typically expressed as clicks per second. This test is popular among gamers, especially those playing Minecraft PvP, where fast clicking can provide a competitive advantage.</p>-->
<!--                        </section>-->

<!--                        <section class="footer-section">-->
<!--                            <h2><i class="fas fa-chart-line" style="color: #2196F3;"></i> How to Improve Your CPS Score</h2>-->
<!--                            <p>Regular practice with our CPS tester can help improve your clicking speed. Try different clicking techniques like butterfly clicking, jitter clicking, or drag clicking to find what works best for you. Most average users score between 3-6 CPS, while professional gamers can achieve 10-15+ CPS with advanced techniques.</p>-->
<!--                        </section>-->

<!--                        <section class="footer-section">-->
<!--                            <h2><i class="fas fa-star" style="color: #FFC107;"></i> Why Use CPS Test</h2>-->
<!--                            <ul>-->
<!--                                <li><strong>Gaming Performance:</strong> Measure and improve your clicking speed for competitive gaming</li>-->
<!--                                <li><strong>Practice Tool:</strong> Free online CPS tester to track your progress over time</li>-->
<!--                                <li><strong>Multiple Time Modes:</strong> Choose from 10, 20, 30, 40, or 50 second tests</li>-->
<!--                                <li><strong>Instant Results:</strong> Real-time CPS calculation and click tracking</li>-->
<!--                            </ul>-->
<!--                        </section>-->

<!--                        <section class="footer-section">-->
<!--                            <h2><i class="fas fa-cogs" style="color: #FF5722;"></i> CPS Test Features</h2>-->
<!--                            <p>Our CPS tester offers accurate click speed measurement with an intuitive interface. Test your mouse clicking speed with customizable time durations. Perfect for gamers who want to improve their click speed or anyone curious about their clicking ability. Start testing now and see how fast you can click!</p>-->
<!--                        </section>-->

<!--                        <section class="footer-section">-->
<!--                            <h2><i class="fas fa-gamepad" style="color: #9C27B0;"></i> About Click Speed Testing</h2>-->
<!--                            <p>Click speed testing has become essential for gamers, particularly in Minecraft PvP, shooting games, and other competitive games where rapid clicking matters. Use our free CPS test to measure, practice, and improve your clicks per second. Whether you're a casual gamer or a competitive player, tracking your CPS can help you enhance your gaming performance.</p>-->
<!--                        </section>-->
<!--                    </div>-->
    </footer>
</div>
</body>
<script>
    // ========== 禁用浏览器默认菜单和选择 ==========
    // 禁用整个页面的右键菜单
    document.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        return false;
    });

    // 禁用文本选择
    document.addEventListener('selectstart', (e) => {
        e.preventDefault();
        return false;
    });

    // 禁用拖拽
    document.addEventListener('dragstart', (e) => {
        e.preventDefault();
        return false;
    });

    // 状态变量
    let duration = 10;  // 默认倒计时时长（秒）
    let running = false;  // 是否正在运行
    let clickCount = 0;  // 点击次数
    let startTime = 0;  // 开始时间
    let intervalId = null;  // 定时器ID
    let endTimeoutId = null;  // 结束定时器ID
    let testFinished = false;  // 测试是否已完成

    // 获取 DOM 元素
    const clickCountElement = document.getElementById("clickCount");
    const timerDisplay = document.getElementById("timerDisplay");
    const cpsDisplay = document.getElementById("cpsDisplay");
    const circle = document.getElementById('circle');
    const clickIcon = document.getElementById('clickIcon');
    const timeBtns = document.querySelectorAll('.seconds a');

    // 初始化显示
    timerDisplay.textContent = formatTime(duration);

    // 时间格式化函数（秒 -> 秒.毫秒）
    function formatTime(seconds) {
        const secs = Math.floor(seconds);
        const ms = Math.floor((seconds % 1) * 100);
        return `${secs}.${ms.toString().padStart(2, '0')}`;
    }

    // 重置测试状态
    function resetTest() {
        running = false;
        testFinished = false;
        clearInterval(intervalId);
        intervalId = null;
        clearTimeout(endTimeoutId);

        clickCount = 0;
        timerDisplay.textContent = formatTime(duration);
        cpsDisplay.textContent = '0.00';
        clickCountElement.textContent = '0';

        // 恢复显示图标
        if (clickIcon) {
            clickIcon.style.display = 'block';
        }
    }

    // 更新运行状态（每100ms调用）
    function updateRunning() {
        const elapsed = (Date.now() - startTime) / 1000;
        const remaining = Math.max(duration - elapsed, 0);
        timerDisplay.textContent = formatTime(remaining);

        const cps = elapsed > 0 ? (clickCount / elapsed) : 0;
        cpsDisplay.textContent = cps.toFixed(2);
        clickCountElement.textContent = clickCount;
    }

    // 结束测试
    function endTest() {
        running = false;
        testFinished = true;
        clearInterval(intervalId);
        intervalId = null;
        clearTimeout(endTimeoutId);

        // 显示最终结果（保留不重置）
        const cps = duration > 0 ? (clickCount / duration) : 0;
        timerDisplay.textContent = formatTime(0);
        cpsDisplay.textContent = cps.toFixed(2);
        clickCountElement.textContent = clickCount;

        // 恢复显示图标
        if (clickIcon) {
            clickIcon.style.display = 'block';
        }
    }

    // 开始测试
    function startTest() {
        running = true;
        testFinished = false;
        clickCount = 0;
        startTime = Date.now();
        timerDisplay.textContent = formatTime(duration);
        cpsDisplay.textContent = '0.00';
        clickCountElement.textContent = '0';

        // 隐藏图标
        if (clickIcon) {
            clickIcon.style.display = 'none';
        }

        clearInterval(intervalId);
        intervalId = setInterval(updateRunning, 100);

        clearTimeout(endTimeoutId);
        endTimeoutId = setTimeout(endTest, duration * 1000);
    }

    // 时间按钮点击事件
    timeBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();

            // 更新倒计时时长
            duration = parseInt(btn.getAttribute('data-seconds'), 10);
            timerDisplay.textContent = formatTime(duration);

            // 重置当前状态（即使测试运行中也可以切换）
            resetTest();
        });
    });

    // 禁用右键菜单
    circle.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        e.stopPropagation();
        return false;
    });

    // 点击圆形区域事件
    circle.addEventListener('click', (e) => {
        // 添加波纹效果
        const rect = circle.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);

        const ripple = document.createElement('span');
        ripple.className = 'ripple';

        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;

        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = x + 'px';
        ripple.style.top = y + 'px';

        circle.appendChild(ripple);

        ripple.addEventListener('animationend', () => {
            ripple.remove();
        });

        // 如果测试已完成，点击圆形区域不开始新测试
        if (testFinished) {
            return;
        }

        // 开始测试并计数
        if (!running) {
            startTest();
        }
        clickCount++;

        // 更新能量槽
        powerMeter.handleClick();

        // ========== 视觉特效系统 ==========
        createParticleExplosion(e.clientX, e.clientY, rect);
        createClickNumber(e.clientX, e.clientY, rect);
        comboSystem.handleClick();
    });

    // ========== 粒子爆炸效果 ==========
    function createParticleExplosion(x, y, rect) {
        const particleCount = 12;
        const colors = ['#00d4ff', '#ff9500', '#ff4444', '#FFD700', '#FF69B4', '#00FF7F'];

        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';

            const size = Math.random() * 8 + 4;
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';

            const color = colors[Math.floor(Math.random() * colors.length)];
            particle.style.background = color;
            particle.style.boxShadow = `0 0 ${size}px ${color}`;

            // 设置初始位置
            const startX = x - rect.left;
            const startY = y - rect.top;
            particle.style.left = startX + 'px';
            particle.style.top = startY + 'px';

            // 随机爆炸方向
            const angle = (Math.PI * 2 * i) / particleCount;
            const distance = Math.random() * 100 + 50;
            const tx = Math.cos(angle) * distance;
            const ty = Math.sin(angle) * distance;

            particle.style.setProperty('--tx', tx + 'px');
            particle.style.setProperty('--ty', ty + 'px');

            particle.style.animation = `particle-explode ${Math.random() * 0.3 + 0.4}s ease-out forwards`;

            circle.appendChild(particle);

            particle.addEventListener('animationend', () => {
                particle.remove();
            });
        }
    }

    // ========== 数字飘升效果 ==========
    function createClickNumber(x, y, rect) {
        const number = document.createElement('div');
        number.className = 'click-number';
        number.textContent = '+1';

        number.style.left = (x - rect.left - 20) + 'px';
        number.style.top = (y - rect.top - 30) + 'px';

        circle.appendChild(number);

        number.addEventListener('animationend', () => {
            number.remove();
        });
    }

    // ========== Combo系统 ==========
    const comboSystem = {
        count: 0,
        lastClickTime: 0,
        comboTimeout: null,
        display: document.getElementById('comboDisplay'),
        number: document.getElementById('comboNumber'),
        comboThreshold: 500, // 500ms内点击才算combo

        handleClick() {
            const now = Date.now();

            // 检查是否在combo时间内
            if (now - this.lastClickTime < this.comboThreshold) {
                this.count++;
            } else {
                this.count = 1;
            }

            this.lastClickTime = now;

            // 更新显示
            this.updateDisplay();

            // 重置超时
            clearTimeout(this.comboTimeout);
            this.comboTimeout = setTimeout(() => {
                this.reset();
            }, this.comboThreshold);
        },

        updateDisplay() {
            this.number.textContent = 'x' + this.count;

            // Combo >= 10时显示
            if (this.count >= 10) {
                this.display.classList.add('active');

                // 添加增加震动效果
                this.display.classList.remove('combo-increase');
                void this.display.offsetWidth; // 触发重排
                this.display.classList.add('combo-increase');
            } else {
                this.display.classList.remove('active');
            }

            // 根据combo数改变颜色
            if (this.count >= 50) {
                this.number.style.color = '#ff0040';
                this.number.style.textShadow = '0 0 20px rgba(255, 0, 64, 0.8), 0 0 40px rgba(255, 0, 64, 1)';
            } else if (this.count >= 30) {
                this.number.style.color = '#ff6347';
                this.number.style.textShadow = '0 0 20px rgba(255, 99, 71, 0.8), 0 0 40px rgba(255, 99, 71, 1)';
            } else if (this.count >= 10) {
                this.number.style.color = '#fff';
                this.number.style.textShadow = '0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 215, 0, 0.6)';
            }
        },

        reset() {
            this.count = 0;
            this.display.classList.remove('active', 'combo-increase');
            this.number.textContent = 'x0';
        }
    };

    // ========== 能量填充动画逻辑 ==========
    const powerMeter = {
        textCenter: document.querySelector('.text-center'),
        powerLevel: 0,
        clickTimes: [],
        decayInterval: null,

        init() {
            // 启动能量衰减
            this.startDecay();
        },

        handleClick() {
            const now = Date.now();

            // 记录点击时间
            this.clickTimes.push(now);

            // 只保留最近2秒的点击记录
            this.clickTimes = this.clickTimes.filter(time => now - time < 2000);

            // 每次点击固定增加 0.2% 的能量（点击5次增加1%）
            this.powerLevel = Math.min(this.powerLevel + 5, 100);

            this.updateDisplay();
        },

        startDecay() {
            this.decayInterval = setInterval(() => {
                // 能量自动衰减
                if (this.powerLevel > 0) {
                    this.powerLevel = Math.max(this.powerLevel - 2, 0);
                    this.updateDisplay();
                }
            }, 100);
        },

        updateDisplay() {
            // 更新text-center的背景填充宽度
            this.textCenter.style.setProperty('--power-width', this.powerLevel + '%');

            // 移除所有状态类
            this.textCenter.classList.remove('orange', 'overload', 'shake');

            // 根据能量级别设置颜色和状态
            if (this.powerLevel >= 80) {
                // 过载状态 - 红色闪烁 + 震动
                this.textCenter.classList.add('overload', 'shake');
            } else if (this.powerLevel >= 50) {
                // 高能量状态 - 橙色
                this.textCenter.classList.add('orange');
            }
            // 能量 < 50 保持蓝色（默认状态）
        }
    };

    // 初始化能量填充
    powerMeter.init();
</script>
</html>
